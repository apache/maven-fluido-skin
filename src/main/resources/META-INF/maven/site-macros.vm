## Licensed to the Apache Software Foundation (ASF) under one
## or more contributor license agreements.  See the NOTICE file
## distributed with this work for additional information
## regarding copyright ownership.  The ASF licenses this file
## to you under the Apache License, Version 2.0 (the
## "License"); you may not use this file except in compliance
## with the License.  You may obtain a copy of the License at
##
##     http://www.apache.org/licenses/LICENSE-2.0
##
## Unless required by applicable law or agreed to in writing,
## software distributed under the License is distributed on an
## "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
## KIND, either express or implied.  See the License for the
## specific language governing permissions and limitations
## under the License.
##
##
#macro ( topLinks $links )
#**##set ( $counter = 0 )
#**##foreach( $item in $links )
#*  *##set ( $counter = $counter + 1 )
#*  *##set ( $currentItemHref = $PathTool.calculateLink( $item.href, $relativePath ) )
#*  *##set ( $currentItemHref = $currentItemHref.replaceAll( '\\', '/' ) )
    <li>#topLink( $currentItemHref $item.name $item.target )</li>
#**##end
#end
##
#macro ( link $href $name $target $img $position $alt $border $width $height $icon )
#**##set ( $linkTitle = ' title="' + $name + '"' )
#**##if( $target )
#*  *##set ( $linkTarget = ' target="' + $target + '"' )
#**##else
#*  *##set ( $linkTarget = "" )
#**##end
#**##if ( $decoration.isLink( $href ) )
#*  *##set ( $linkClass = ' class="externalLink"' )
#**##else
#*  *##set ( $linkClass = "" )
#**##end
#**##if ( $img )
#*  *##if ( $position == "left" )
#*    *#<a href="$href"$linkClass$linkTarget$linkTitle>#image( $img $alt $border $width $height )$name</a>##
#*  *##else
#*    *#<a href="$href"$linkClass$linkTarget$linkTitle>$name #image( $img $alt $border $width $height )</a>##
#*  *##end
#**##else
#*  *#<a href="$href"$linkClass$linkTarget$linkTitle>##
#*  *##if( $icon )
#*    *#<span class="$icon"></span>##
#*  *##end
#*  *#$name</a>##
#**##end
#end
##
#macro ( links $links )
#**##if ( $links && $links.size() > 0 )
#*  *##set ( $counter = 0 )
#*  *### MSKINS-41
#*  *##set ( $begin = $links.size() - 1 )
#*  *##foreach( $index in [$begin..0] )
#*    *##set ( $item = $links.get( $index ) )
#*    *##set ( $counter = $counter + 1 )
#*    *##set ( $currentItemHref = $PathTool.calculateLink( $item.href, $relativePath ) )
#*    *##set ( $currentItemHref = $currentItemHref.replaceAll( '\\', '/' ) )
##
        <li class="pull-right">##
#*    *##if ( $counter > 0 && $counter < $links.size() )
#*    *#<span class="divider">|</span>
#*    *##end
#*    *##link( $currentItemHref $item.name $item.target $item.img $item.position $item.alt $item.border $item.width $item.height false )
#*    *#</li>
#*  *##end
#**##end
#end
##
#macro ( publishDate $position $decorationPublishDate $version )
#**##if ( $publishDate )
#*  *##set ( $dateValue = $date.format( $publishDate ) )
#**##elseif ( $decoration.custom.getChild( 'publishDate' ) )
#*  *##set ( $dateValue = $decoration.custom.getChild( 'publishDate' ).getValue() )
#**##else
#*  *##set ( $dateValue = $date )
#**##end
##
#**##set ( $datePosition = $decorationPublishDate.position )
#**##set ( $versionPosition = $version.position )
##
#**##set ( $breadcrumbs = $decoration.body.breadcrumbs )
#**##set ( $links = $decoration.body.links )
##
#**##if ( $datePosition.equalsIgnoreCase( "right" ) && ( $versionPosition.equalsIgnoreCase( "right" ) || !$topBarEnabled
                                                                                                         && $decoration.body.links
                                                                                                         && $decoration.body.links.size() > 0 ) )
#*  *##set ( $prefix = '<span class="divider">|</span> ' )
#**##else
#*  *##set ( $prefix = "" )
#**##end
##
#**##if ( $datePosition.equalsIgnoreCase( $position ) )
#*  *##if ( ( $datePosition.equalsIgnoreCase( "right" ) ) || ( $datePosition.equalsIgnoreCase( "bottom" ) ) )
        <li id="publishDate" class="pull-right">$prefix$text.get( "template.lastpublished" ): $dateValue</li>
#*    *##if ( $versionPosition.equalsIgnoreCase( $position ) )
          <li id="projectVersion" class="pull-right">##
#*      *##if ( !$topBarEnabled
              && $decoration.body.links
              && $decoration.body.links.size() > 0 )
#*        *#<span class="divider">|</span>##
#*      *##end
#*      *#$text.get( "template.version" ): ${project.version}##
#*      *#</li>
#*    *##end
#*  *##elseif ( ( $datePosition.equalsIgnoreCase( "navigation-bottom" ) ) || ( $datePosition.equalsIgnoreCase( "navigation-top" ) ) )
      <div id="lastPublished">
        <span id="publishDate">$text.get( "template.lastpublished" ): $dateValue</span>
#*    *##if ( $versionPosition.equalsIgnoreCase( $position ) )
        <span class="divider">|</span> <span id="projectVersion">$text.get( "template.version" ): ${project.version}</span>
#*    *##end
      </div>
#*  *##elseif ( $datePosition.equalsIgnoreCase("left") )
        <li id="publishDate">$text.get( "template.lastpublished" ): $dateValue##
#*    *##if ( $versionPosition.equalsIgnoreCase( $position ) || $breadcrumbs && $breadcrumbs.size() > 0 )
#*      *#<span class="divider">|</span>
#*    *##end
#*    *#</li>
#*    *##if ( $versionPosition.equalsIgnoreCase( $position ) )
          <li id="projectVersion">$text.get( "template.version" ): ${project.version}##
#*      *##if ( $breadcrumbs && $breadcrumbs.size() > 0 )
#*        *#<span class="divider">|</span>##
#*      *##end
#*      *#</li>
#*    *##end
#*    *##if ( $breadcrumbs && $breadcrumbs.size() > 0 )
#*      *##breadcrumbs( $breadcrumbs "" )
#*    *##end
#*  *##end
#**##elseif ( $versionPosition.equalsIgnoreCase( $position ) )
#*  *##if ( $versionPosition.equalsIgnoreCase( "right" ) )
      <li id="projectVersion" class="pull-right">$prefix$text.get( "template.version" ): ${project.version}</li>
#*  *##elseif ( $versionPosition.equalsIgnoreCase( "bottom" ) )
      <span id="projectVersion">$text.get( "template.version" ): ${project.version}</span>
#*  *##elseif ( ( $versionPosition.equalsIgnoreCase( "navigation-bottom" ) ) || ( $versionPosition.equalsIgnoreCase( "navigation-top" ) ) )
      <div id="lastPublished">
        <span id="projectVersion">$text.get( "template.version" ): ${project.version}</span>
      </div>
#*  *##elseif ( $versionPosition.equalsIgnoreCase("left") )
        <li id="projectVersion">$text.get( "template.version" ): ${project.version}##
#*      *##if ( $breadcrumbs && $breadcrumbs.size() > 0 )
#*        *#<span class="divider">|</span>##
#*      *##end
#*    *#</li>
#*    *##if ( $breadcrumbs && $breadcrumbs.size() > 0 )
#*      *##breadcrumbs( $breadcrumbs "")
#*    *##end
#*  *##end
#**##elseif ( $position.equalsIgnoreCase( "left" ) )
#*  *##if ( $breadcrumbs && $breadcrumbs.size() > 0 )
#*    *##breadcrumbs( $breadcrumbs "" )
#*  *##end
#**##end
#end
##

##
#macro ( googleSearch $top )
<form id="search-form" action="https://www.google.com/search" method="get" #if ( $top ) class="navbar-search pull-right" #end>
#**##if( $decoration.getCustomChild( 'fluidoSkin.googleSearch.sitesearch' ) )
#*  *##set( $sitesearchValue = $decoration.getCustomValue( 'fluidoSkin.googleSearch.sitesearch' ) )
#**##else
#*  *##set( $startIndex = $project.url.indexOf("://") + 3 )
#*  *##set( $sitesearchValue = $project.url.substring( $startIndex, $project.url.length() ) )
#**##end
  <input value="$sitesearchValue" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script>asyncJs( 'https://cse.google.com/brand?form=search-form' )</script>
#end
##
## activate profile background image if custom.fluidoSkin.profile value set to "retired", "pre-release" or "sandbox"
#macro ( prjProfile )
#**##set ( $profile = $decoration.getCustomValue( 'fluidoSkin.profile', '' ) )
#**##if ( $profile.equalsIgnoreCase( "retired" )
          || $profile.equalsIgnoreCase( "pre-release" )
          || $profile.equalsIgnoreCase( "sandbox" ) )
      <style type="text/css">body{background-image: url('$relativePath/images/profiles/${profile}.png');}</style>
#**##end
#end
##
#macro( generatedBy )
Apache Maven Doxia Site Renderer#if( $doxiaSiteRendererVersion ) $doxiaSiteRendererVersion#end##
#end
##
##
#macro( anchorJS )
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
#end
##
